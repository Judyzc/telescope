<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Telescope - Browser Performance Testing Agent</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <nav class="top-nav">
    <div class="nav-brand">
      <span class="logo">üî≠</span>
      <span class="brand-name">Telescope</span>
    </div>
    <div class="nav-links">
      <a href="/" class="active">Home</a>
      <a href="/upload.html">Upload</a>
      <a href="/results.html">Results</a>
    </div>
  </nav>

  <main class="container">
    <header class="hero">
      <h1>Telescope</h1>
      <p class="subtitle">A diagnostic, cross-browser performance testing agent</p>
    </header>

    <section class="section">
      <h2>What it collects</h2>
      <p>When you run the agent, it will load the page in the browser you chose and apply any special parameters you have provided. Each test generates:</p>
      <ul class="artifact-list">
        <li><code>console.json</code> - Console output from the page (warnings, JS errors, etc)</li>
        <li><code>video.webm</code> - Video showing the page load progression</li>
        <li><code>metrics.json</code> - Timing metrics collected during page load</li>
        <li><code>pageload.har</code> - HAR file of the page load</li>
        <li><code>resources.json</code> - Resource timing API data</li>
        <li><code>screenshot.png</code> - Screenshot of the final page</li>
        <li><code>/filmstrip</code> - Screenshots during page load for filmstrip view</li>
      </ul>
    </section>

    <section class="section">
      <h2>Quick Start</h2>
      <div class="code-block">
        <pre><code>npx @cloudflare/telescope -u https://example.com -b chrome</code></pre>
      </div>
    </section>

    <section class="section">
      <h2>CLI Parameters</h2>
      <table class="params-table">
        <thead>
          <tr>
            <th>Flag</th>
            <th>Description</th>
            <th>Default</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>-u, --url &lt;url&gt;</code></td>
            <td>URL to run tests against</td>
            <td><em>required</em></td>
          </tr>
          <tr>
            <td><code>-b, --browser &lt;name&gt;</code></td>
            <td>Browser to run tests with. Choices: <code>chrome</code>, <code>chrome-beta</code>, <code>canary</code>, <code>edge</code>, <code>safari</code>, <code>firefox</code></td>
            <td><code>chrome</code></td>
          </tr>
          <tr>
            <td><code>-h, --headers &lt;object&gt;</code></td>
            <td>Custom headers to apply to requests (JSON)</td>
            <td>-</td>
          </tr>
          <tr>
            <td><code>-c, --cookies &lt;object&gt;</code></td>
            <td>Custom cookies to apply (JSON)</td>
            <td>-</td>
          </tr>
          <tr>
            <td><code>-f, --flags &lt;string&gt;</code></td>
            <td>Comma-separated list of Chromium flags</td>
            <td>-</td>
          </tr>
          <tr>
            <td><code>--blockDomains &lt;domains...&gt;</code></td>
            <td>Comma-separated list of domains to block</td>
            <td><code>[]</code></td>
          </tr>
          <tr>
            <td><code>--block &lt;substrings...&gt;</code></td>
            <td>Comma-separated list of URL substrings to block</td>
            <td><code>[]</code></td>
          </tr>
          <tr>
            <td><code>--firefoxPrefs &lt;object&gt;</code></td>
            <td>Firefox User Preferences (JSON, Firefox only)</td>
            <td>-</td>
          </tr>
          <tr>
            <td><code>--cpuThrottle &lt;int&gt;</code></td>
            <td>CPU throttling factor</td>
            <td>-</td>
          </tr>
          <tr>
            <td><code>--connectionType &lt;string&gt;</code></td>
            <td>Network throttling. Choices: <code>cable</code>, <code>dsl</code>, <code>4g</code>, <code>3g</code>, <code>3gfast</code>, <code>3gslow</code>, <code>2g</code>, <code>fios</code></td>
            <td><em>none</em></td>
          </tr>
          <tr>
            <td><code>--width &lt;int&gt;</code></td>
            <td>Viewport width in pixels</td>
            <td><code>1366</code></td>
          </tr>
          <tr>
            <td><code>--height &lt;int&gt;</code></td>
            <td>Viewport height in pixels</td>
            <td><code>768</code></td>
          </tr>
          <tr>
            <td><code>--frameRate &lt;int&gt;</code></td>
            <td>Filmstrip frame rate (fps)</td>
            <td><code>1</code></td>
          </tr>
          <tr>
            <td><code>--disableJS</code></td>
            <td>Disable JavaScript</td>
            <td><code>false</code></td>
          </tr>
          <tr>
            <td><code>--debug</code></td>
            <td>Output debug lines</td>
            <td><code>false</code></td>
          </tr>
          <tr>
            <td><code>--auth &lt;object&gt;</code></td>
            <td>Basic HTTP authentication (JSON: <code>{"username": "", "password": ""}</code>)</td>
            <td>-</td>
          </tr>
          <tr>
            <td><code>--timeout &lt;int&gt;</code></td>
            <td>Maximum time in milliseconds to wait</td>
            <td><code>30000</code></td>
          </tr>
          <tr>
            <td><code>--html</code></td>
            <td>Generate HTML report</td>
            <td><code>false</code></td>
          </tr>
          <tr>
            <td><code>--openHtml</code></td>
            <td>Open HTML report in browser (requires --html)</td>
            <td><code>false</code></td>
          </tr>
          <tr>
            <td><code>--zip</code></td>
            <td>Zip the results into the results directory</td>
            <td><code>false</code></td>
          </tr>
        </tbody>
      </table>
    </section>

    <section class="section">
      <h2>Examples</h2>
      
      <h3>Basic test</h3>
      <div class="code-block">
        <pre><code>npx @cloudflare/telescope -u https://example.com -b chrome</code></pre>
      </div>

      <h3>With network throttling (3G)</h3>
      <div class="code-block">
        <pre><code>npx @cloudflare/telescope -u https://example.com -b chrome --connectionType 3g</code></pre>
      </div>

      <h3>Custom viewport</h3>
      <div class="code-block">
        <pre><code>npx @cloudflare/telescope -u https://example.com -b chrome --width 1920 --height 1080</code></pre>
      </div>

      <h3>With custom cookies</h3>
      <div class="code-block">
        <pre><code>npx @cloudflare/telescope -u https://example.com -b chrome -c '{"name": "session", "value": "abc123"}'</code></pre>
      </div>

      <h3>Generate ZIP for upload</h3>
      <div class="code-block">
        <pre><code>npx @cloudflare/telescope -u https://example.com -b chrome --zip</code></pre>
      </div>

      <h3>Test with JavaScript disabled</h3>
      <div class="code-block">
        <pre><code>npx @cloudflare/telescope -u https://example.com -b firefox --disableJS</code></pre>
      </div>

      <h3>HTTP Basic Auth</h3>
      <div class="code-block">
        <pre><code>npx @cloudflare/telescope -u https://staging.example.com -b safari --auth '{"username": "user", "password": "pass"}'</code></pre>
      </div>
    </section>

    <section class="section">
      <h2>Installation</h2>
      <div class="code-block">
        <pre><code>npm install @cloudflare/telescope</code></pre>
      </div>
      <p>Telescope uses Playwright to control browsers. After installation, browsers are automatically installed via <code>npx playwright install</code>.</p>
      <p>You'll also need <strong>ffmpeg</strong> for video processing:</p>
      <div class="code-block">
        <pre><code>brew install ffmpeg</code></pre>
      </div>
    </section>

    <section class="section">
      <h2>Supported Browsers</h2>
      <div class="browser-grid">
        <div class="browser-card">
          <span class="browser-icon">üåê</span>
          <span class="browser-name">Chrome</span>
        </div>
        <div class="browser-card">
          <span class="browser-icon">üåê</span>
          <span class="browser-name">Chrome Beta</span>
        </div>
        <div class="browser-card">
          <span class="browser-icon">üåê</span>
          <span class="browser-name">Chrome Canary</span>
        </div>
        <div class="browser-card">
          <span class="browser-icon">ü¶ä</span>
          <span class="browser-name">Firefox</span>
        </div>
        <div class="browser-card">
          <span class="browser-icon">üß≠</span>
          <span class="browser-name">Safari</span>
        </div>
        <div class="browser-card">
          <span class="browser-icon">üìò</span>
          <span class="browser-name">Edge</span>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>Telescope by Cloudflare</p>
  </footer>
</body>
</html>
